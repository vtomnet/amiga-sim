<?xml version="1.0"?>
<sdf version="1.9">
  <model name="amiga_kinova">
    <pose>0 0 0 0 0 0</pose>
    <static>false</static>
    <link name="base_link">
      <pose>0 0 0.2 0 0 0</pose>
      <inertial>
        <mass>120.0</mass>
        <inertia>
          <ixx>10.0</ixx>
          <iyy>12.0</iyy>
          <izz>8.0</izz>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyz>0</iyz>
        </inertia>
      </inertial>
      <collision name="base_collision">
        <geometry>
          <mesh>
            <uri>meshes/amiga_body.stl</uri>
          </mesh>
        </geometry>
        <pose>0 0 0 0 0 0</pose>
      </collision>
      <visual name="base_visual">
        <geometry>
          <mesh>
            <uri>meshes/amiga_body.stl</uri>
          </mesh>
        </geometry>
        <material>
          <ambient>0.2 0.2 0.2 1</ambient>
          <diffuse>0.6 0.6 0.6 1</diffuse>
        </material>
        <pose>0 0 0 0 0 0</pose>
      </visual>
    </link>

    <link name="left_wheel_link">
      <pose>-0.45 0.35 0.1 0 1.5708 0</pose>
      <inertial>
        <mass>5.0</mass>
        <inertia>
          <ixx>0.1</ixx>
          <iyy>0.1</iyy>
          <izz>0.05</izz>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyz>0</iyz>
        </inertia>
      </inertial>
      <collision name="left_wheel_collision">
        <geometry>
          <mesh>
            <uri>meshes/amiga_wheel.stl</uri>
          </mesh>
        </geometry>
      </collision>
      <visual name="left_wheel_visual">
        <geometry>
          <mesh>
            <uri>meshes/amiga_wheel.stl</uri>
          </mesh>
        </geometry>
        <material>
          <ambient>0.1 0.1 0.1 1</ambient>
          <diffuse>0.1 0.1 0.1 1</diffuse>
        </material>
      </visual>
    </link>

    <link name="right_wheel_link">
      <pose>0.45 0.35 0.1 0 1.5708 0</pose>
      <inertial>
        <mass>5.0</mass>
        <inertia>
          <ixx>0.1</ixx>
          <iyy>0.1</iyy>
          <izz>0.05</izz>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyz>0</iyz>
        </inertia>
      </inertial>
      <collision name="right_wheel_collision">
        <geometry>
          <mesh>
            <uri>meshes/amiga_wheel.stl</uri>
          </mesh>
        </geometry>
      </collision>
      <visual name="right_wheel_visual">
        <geometry>
          <mesh>
            <uri>meshes/amiga_wheel.stl</uri>
          </mesh>
        </geometry>
        <material>
          <ambient>0.1 0.1 0.1 1</ambient>
          <diffuse>0.1 0.1 0.1 1</diffuse>
        </material>
      </visual>
    </link>

    <joint name="left_wheel_joint" type="continuous">
      <parent>base_link</parent>
      <child>left_wheel_link</child>
      <pose>-0.45 0.35 0.0 0 0 0</pose>
      <axis>
        <xyz>0 1 0</xyz>
        <limit>
          <velocity>10</velocity>
          <effort>120</effort>
        </limit>
        <dynamics>
          <damping>0.1</damping>
        </dynamics>
      </axis>
    </joint>

    <joint name="right_wheel_joint" type="continuous">
      <parent>base_link</parent>
      <child>right_wheel_link</child>
      <pose>0.45 0.35 0.0 0 0 0</pose>
      <axis>
        <xyz>0 1 0</xyz>
        <limit>
          <velocity>10</velocity>
          <effort>120</effort>
        </limit>
        <dynamics>
          <damping>0.1</damping>
        </dynamics>
      </axis>
    </joint>

    <!-- Kinova Gen3 simplified links -->
    <link name="kinova_base_link">
      <pose>0 0 0.45 0 0 0</pose>
      <inertial>
        <mass>8.5</mass>
        <inertia>
          <ixx>0.2</ixx>
          <iyy>0.18</iyy>
          <izz>0.2</izz>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyz>0</iyz>
        </inertia>
      </inertial>
      <collision name="kinova_base_collision">
        <geometry>
          <mesh>
            <uri>meshes/kinova_link.stl</uri>
          </mesh>
        </geometry>
      </collision>
      <visual name="kinova_base_visual">
        <geometry>
          <mesh>
            <uri>meshes/kinova_link.stl</uri>
          </mesh>
        </geometry>
        <material>
          <ambient>0.1 0.1 0.4 1</ambient>
          <diffuse>0.2 0.2 0.8 1</diffuse>
        </material>
      </visual>
    </link>

    <joint name="kinova_joint_1" type="revolute">
      <parent>base_link</parent>
      <child>kinova_base_link</child>
      <pose>0 0 0.4 0 0 0</pose>
      <axis>
        <xyz>0 0 1</xyz>
        <limit>
          <lower>-3.14</lower>
          <upper>3.14</upper>
          <velocity>1.57</velocity>
          <effort>120</effort>
        </limit>
      </axis>
    </joint>

    <!-- Additional Kinova joints -->
    <link name="kinova_link_1">
      <pose>0 0 0.65 0 0 0</pose>
      <inertial>
        <mass>4.0</mass>
        <inertia>
          <ixx>0.05</ixx>
          <iyy>0.05</iyy>
          <izz>0.03</izz>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyz>0</iyz>
        </inertia>
      </inertial>
      <collision name="kinova_link_1_collision">
        <geometry>
          <mesh>
            <uri>meshes/kinova_link.stl</uri>
          </mesh>
        </geometry>
      </collision>
      <visual name="kinova_link_1_visual">
        <geometry>
          <mesh>
            <uri>meshes/kinova_link.stl</uri>
          </mesh>
        </geometry>
      </visual>
    </link>

    <joint name="kinova_joint_2" type="revolute">
      <parent>kinova_base_link</parent>
      <child>kinova_link_1</child>
      <pose>0 0 0.25 0 0 0</pose>
      <axis>
        <xyz>0 1 0</xyz>
        <limit>
          <lower>-2.5</lower>
          <upper>2.5</upper>
          <velocity>1.57</velocity>
          <effort>100</effort>
        </limit>
      </axis>
    </joint>

    <link name="kinova_link_2">
      <pose>0 0 0.95 0 0 0</pose>
      <inertial>
        <mass>3.5</mass>
        <inertia>
          <ixx>0.04</ixx>
          <iyy>0.04</iyy>
          <izz>0.02</izz>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyz>0</iyz>
        </inertia>
      </inertial>
      <collision name="kinova_link_2_collision">
        <geometry>
          <mesh>
            <uri>meshes/kinova_link.stl</uri>
          </mesh>
        </geometry>
      </collision>
      <visual name="kinova_link_2_visual">
        <geometry>
          <mesh>
            <uri>meshes/kinova_link.stl</uri>
          </mesh>
        </geometry>
      </visual>
    </link>

    <joint name="kinova_joint_3" type="revolute">
      <parent>kinova_link_1</parent>
      <child>kinova_link_2</child>
      <pose>0 0 0.3 0 0 0</pose>
      <axis>
        <xyz>0 0 1</xyz>
        <limit>
          <lower>-2.5</lower>
          <upper>2.5</upper>
          <velocity>1.57</velocity>
          <effort>90</effort>
        </limit>
      </axis>
    </joint>

    <link name="kinova_link_3">
      <pose>0 0 1.25 0 0 0</pose>
      <inertial>
        <mass>3.0</mass>
        <inertia>
          <ixx>0.03</ixx>
          <iyy>0.03</iyy>
          <izz>0.02</izz>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyz>0</iyz>
        </inertia>
      </inertial>
      <collision name="kinova_link_3_collision">
        <geometry>
          <mesh>
            <uri>meshes/kinova_link.stl</uri>
          </mesh>
        </geometry>
      </collision>
      <visual name="kinova_link_3_visual">
        <geometry>
          <mesh>
            <uri>meshes/kinova_link.stl</uri>
          </mesh>
        </geometry>
      </visual>
    </link>

    <joint name="kinova_joint_4" type="revolute">
      <parent>kinova_link_2</parent>
      <child>kinova_link_3</child>
      <pose>0 0 0.3 0 0 0</pose>
      <axis>
        <xyz>0 1 0</xyz>
        <limit>
          <lower>-2.5</lower>
          <upper>2.5</upper>
          <velocity>1.57</velocity>
          <effort>70</effort>
        </limit>
      </axis>
    </joint>

    <link name="kinova_link_4">
      <pose>0 0 1.55 0 0 0</pose>
      <inertial>
        <mass>2.5</mass>
        <inertia>
          <ixx>0.02</ixx>
          <iyy>0.02</iyy>
          <izz>0.01</izz>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyz>0</iyz>
        </inertia>
      </inertial>
      <collision name="kinova_link_4_collision">
        <geometry>
          <mesh>
            <uri>meshes/kinova_link.stl</uri>
          </mesh>
        </geometry>
      </collision>
      <visual name="kinova_link_4_visual">
        <geometry>
          <mesh>
            <uri>meshes/kinova_link.stl</uri>
          </mesh>
        </geometry>
      </visual>
    </link>

    <joint name="kinova_joint_5" type="revolute">
      <parent>kinova_link_3</parent>
      <child>kinova_link_4</child>
      <pose>0 0 0.3 0 0 0</pose>
      <axis>
        <xyz>0 0 1</xyz>
        <limit>
          <lower>-2.5</lower>
          <upper>2.5</upper>
          <velocity>1.57</velocity>
          <effort>50</effort>
        </limit>
      </axis>
    </joint>

    <link name="kinova_link_5">
      <pose>0 0 1.85 0 0 0</pose>
      <inertial>
        <mass>2.0</mass>
        <inertia>
          <ixx>0.015</ixx>
          <iyy>0.015</iyy>
          <izz>0.008</izz>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyz>0</iyz>
        </inertia>
      </inertial>
      <collision name="kinova_link_5_collision">
        <geometry>
          <mesh>
            <uri>meshes/kinova_link.stl</uri>
          </mesh>
        </geometry>
      </collision>
      <visual name="kinova_link_5_visual">
        <geometry>
          <mesh>
            <uri>meshes/kinova_link.stl</uri>
          </mesh>
        </geometry>
      </visual>
    </link>

    <joint name="kinova_joint_6" type="revolute">
      <parent>kinova_link_4</parent>
      <child>kinova_link_5</child>
      <pose>0 0 0.3 0 0 0</pose>
      <axis>
        <xyz>0 1 0</xyz>
        <limit>
          <lower>-2.5</lower>
          <upper>2.5</upper>
          <velocity>1.57</velocity>
          <effort>40</effort>
        </limit>
      </axis>
    </joint>

    <link name="kinova_link_6">
      <pose>0 0 2.05 0 0 0</pose>
      <inertial>
        <mass>1.8</mass>
        <inertia>
          <ixx>0.012</ixx>
          <iyy>0.012</iyy>
          <izz>0.006</izz>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyz>0</iyz>
        </inertia>
      </inertial>
      <collision name="kinova_link_6_collision">
        <geometry>
          <mesh>
            <uri>meshes/kinova_link.stl</uri>
          </mesh>
        </geometry>
      </collision>
      <visual name="kinova_link_6_visual">
        <geometry>
          <mesh>
            <uri>meshes/kinova_link.stl</uri>
          </mesh>
        </geometry>
      </visual>
    </link>

    <joint name="kinova_joint_7" type="revolute">
      <parent>kinova_link_5</parent>
      <child>kinova_link_6</child>
      <pose>0 0 0.2 0 0 0</pose>
      <axis>
        <xyz>0 0 1</xyz>
        <limit>
          <lower>-2.5</lower>
          <upper>2.5</upper>
          <velocity>1.57</velocity>
          <effort>30</effort>
        </limit>
      </axis>
    </joint>

    <link name="kinova_end_effector">
      <pose>0 0 2.2 0 0 0</pose>
      <inertial>
        <mass>1.0</mass>
        <inertia>
          <ixx>0.01</ixx>
          <iyy>0.01</iyy>
          <izz>0.005</izz>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyz>0</iyz>
        </inertia>
      </inertial>
      <collision name="kinova_ee_collision">
        <geometry>
          <mesh>
            <uri>meshes/kinova_link.stl</uri>
          </mesh>
        </geometry>
      </collision>
      <visual name="kinova_ee_visual">
        <geometry>
          <mesh>
            <uri>meshes/kinova_link.stl</uri>
          </mesh>
        </geometry>
      </visual>
    </link>

    <joint name="kinova_tool_joint" type="fixed">
      <parent>kinova_link_6</parent>
      <child>kinova_end_effector</child>
      <pose>0 0 0.15 0 0 0</pose>
      <axis>
        <xyz>0 0 1</xyz>
      </axis>
    </joint>

    <plugin name="ros2_control" filename="libignition-gazebo-ros2-control-system.so">
      <parameters>../config/ros2_control.yaml</parameters>
    </plugin>
  </model>
</sdf>
